(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(44)},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(25),i=a.n(c),s=a(15),o=a.n(s),l=a(19),m=a(13);a(34);function u(e){var t=e.mainWeather.toLowerCase();return n.a.createElement("div",{className:"weather_forecast_item col-1 ".concat(t),"data-index":e.data_attr},n.a.createElement("div",{className:"weather_forecast_item_wrap"},n.a.createElement("div",{className:"weather_forecast_date"}," ",e.date),n.a.createElement("div",{className:"weather_forecast_temp"}," ",e.temp," "),n.a.createElement("div",{className:"weather_forecast_pressure"}),n.a.createElement("div",{className:"weather_forecast_humidity"}),n.a.createElement("div",{className:"weather_forecast_main"},e.mainWeather),n.a.createElement("div",{className:"weather_icon"})))}a(35);function d(e){var t=e.mainWeather.toLowerCase(),a=e.name;return n.a.createElement("div",null,n.a.createElement("div",{className:"row border-t-none"},n.a.createElement("div",{className:"weather_item col col-2 ".concat(t),"data-index":e.data_attr},n.a.createElement("div",{className:"weather_item_wrap"},n.a.createElement("div",{className:"row border-none"},n.a.createElement("div",{className:"col-2 weather_main"},n.a.createElement("div",{className:"row border-none"},n.a.createElement("div",{className:"col-2 border-none weather_city"}," ",e.name," "),n.a.createElement("div",{className:"col-2 border-none weather_temp"},e.temp," ")),n.a.createElement("div",{className:"row border-none weather_description_icon"},n.a.createElement("div",{className:"col-2 border-none weather_description"},e.descriptionWeather),n.a.createElement("div",{className:"col-2 border-none main_weather_icon"},n.a.createElement("div",{className:"weather_icon weather_item_icon"})))),n.a.createElement("div",{className:"col-2 border-r-none weather_secondary_info"},n.a.createElement("div",{className:"weather_pressure"},"\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",e.pressure," "),n.a.createElement("div",{className:"weather_humidity"},"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: ",e.humidity," %"," "))))),n.a.createElement("div",{className:"weather_link_forecast col col-2 "},n.a.createElement("div",{className:"weather_link_forecast_wrapper"},n.a.createElement("div",{className:"link_more","data-index":e.data_attr,onClick:function(t){return e.onWeatherForecastClick(t)}},"\u0443\u0437\u043d\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u043e\u0437")))),e.isWeatherForecastOpened&&n.a.createElement("div",{className:"weather_forecast"},"City : ",a,n.a.createElement("div",{className:"weather_forecast_list"},e.weatherForecast.map(function(e,t){return n.a.createElement(u,{temp:e.temp,pressure:e.pressure,key:t,data_attr:t,humidity:e.humidity,date:e.date,mainWeather:e.mainWeather,descriptionWeather:e.descriptionWeather})}))))}a(36);function p(){var e=Object(r.useContext)(E),t=e.weather,a=e.onWeatherForecastClick;return n.a.createElement("div",{className:"weather_list"},n.a.createElement("div",{className:"row weather_list_title"},n.a.createElement("div",{className:"col col-1 weather_list_title_item"},"\u041f\u043e\u0433\u043e\u0434\u0430"),n.a.createElement("div",{className:"col col-1 weather_list_title_item"},"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),n.a.createElement("div",{className:"col-2 border-r-none"})),t.map(function(e,t){return n.a.createElement(d,{name:e.cityName,temp:e.temp,pressure:e.pressure,key:t,data_attr:t,humidity:e.humidity,mainWeather:e.mainWeather,descriptionWeather:e.descriptionWeather,weatherForecast:e.weatherForecast,onWeatherForecastClick:function(e){return a(e)},isWeatherForecastOpened:e.isWeatherForecastOpened})}))}a(37);function h(e){return n.a.createElement("div",{className:"row form_city_weather"},n.a.createElement("div",{className:"col col-1 input_city"},n.a.createElement("div",{className:"input_city_wrapper"},n.a.createElement("input",{className:"input input_text",onChange:e.onWeatherInputChange,type:"text",placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"}))),n.a.createElement("div",{className:"col col-1 input_submit_city"},n.a.createElement("div",{className:"input_submit_city_wrapper"},n.a.createElement("input",{className:"input input_submit",onClick:e.onWeatherBtnClick,value:"\u0443\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0433\u043e\u0434\u0443",type:"submit"}))),n.a.createElement("div",{className:"col-2 border-r-none"}))}a(38);var w=a(47),_=a(46);function v(e){return n.a.createElement("div",{className:"map"},n.a.createElement("div",{className:"map_weather"},n.a.createElement(w.a,{center:[55.75222,37.61556],zoom:6,maxZoom:17,attributionControl:!0,zoomControl:!0,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,animate:!0,easeLinearity:.35,onClick:e.getMapPosition},">",n.a.createElement(_.a,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}))))}var E=n.a.createContext(),f="e2bc6a595e6ee4928ed91c3778b2b446";function N(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(m.a)(i,2),u=s[0],d=s[1],w=Object(r.useState)(""),_=Object(m.a)(w,2),N=_[0],b=_[1],y=Object(r.useState)([]),W=Object(m.a)(y,2),g=W[0],x=W[1],C=Object(r.useState)(!1),k=Object(m.a)(C,2),O=k[0];k[1];Object(r.useEffect)(function(){g[0]&&g[1]&&B(g)},[g]);var j=function(e,t){b(e.cod);var a=u.slice();200===e.cod&&(a.map(function(e){return e.id}).forEach(function(t,r){t===e.id&&a.splice(r,1)}),a.unshift({id:e.id,cityName:e.name,temp:e.main.temp,pressure:e.main.pressure,humidity:e.main.humidity,mainWeather:e.weather[0].main,descriptionWeather:e.weather[0].description,weatherForecast:t,isWeatherForecastOpened:O}));return a},F=function(e){var t=[];return"200"===e.cod&&e.list.map(function(e){t.push({temp:e.main.temp,pressure:e.main.pressure,humidity:e.main.humidity,date:e.dt_txt,mainWeather:e.weather[0].main,descriptionWeather:e.weather[0].description,isWeatherForecastOpened:!1})}),t},S=function(){var e=Object(l.a)(o.a.mark(function e(t){var a,r,n,c,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat(f,"&lang=ru&units=metric"));case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.next=8,fetch("https://api.openweathermap.org/data/2.5/forecast?q=".concat(t,"&appid=").concat(f,"&lang=ru&units=metric"));case 8:return n=e.sent,e.next=11,n.json();case 11:return c=e.sent,i=F(c),s=j(r,i),e.abrupt("return",d(s));case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(o.a.mark(function e(t){var a,r,n,c,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(t[0],"&lon=").concat(t[1],"&appid=").concat(f,"&units=metric&lang=ru"));case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,console.log(r),e.next=9,fetch("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(t[0],"&lon=").concat(t[1],"&appid=").concat(f,"&lang=ru&units=metric"));case 9:return n=e.sent,e.next=12,n.json();case 12:return c=e.sent,i=F(c),s=j(r,i),e.abrupt("return",d(s));case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P=function(e){var t=e.latlng,a=t.lat,r=t.lng;return x([a,r])},z={weather:u,parse:j,getWeatherByCity:S,getMapCoordinates:P,onWeatherForecastClick:function(e){var t=u.slice();return t[e.currentTarget.dataset.index].isWeatherForecastOpened=!0,d(t)}};return n.a.createElement("div",{className:"wrapper"},n.a.createElement(E.Provider,{value:z},n.a.createElement("section",{className:"row"},n.a.createElement("div",{className:"col col-3"},n.a.createElement(v,{getMapPosition:function(e){return P(e)}})),n.a.createElement("div",{className:"col col-1 col-border-r-none"},n.a.createElement("p",null,"\u041a\u0430\u0440\u0442\u0430"))),n.a.createElement(h,{onWeatherInputChange:function(e){c(e.target.value)},onWeatherBtnClick:function(){return S(a)}}),n.a.createElement("div",{className:"status"},"404"===N?"\u041e\u0448\u0438\u0431\u043a\u0430, \u0442\u0430\u043a\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u0449\u0435\u0442\u0441\u0432\u0443\u044e\u0449\u0438\u0439 \u0433\u043e\u0440\u043e\u0434 \u0438\u043b\u0438 \u043d\u0430\u0439\u0434\u0438\u0442\u0435 \u0435\u0433\u043e \u043d\u0430 \u043a\u0430\u0440\u0442\u0435":""),n.a.createElement(p,null)))}var b=a(26),y=a(10);a(43);i.a.render(n.a.createElement(function(){return n.a.createElement(b.a,null,n.a.createElement("div",{className:"mainPage"},n.a.createElement(y.c,null,n.a.createElement(y.a,{exact:!0,path:"/",component:N}))))},null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.c60803d0.chunk.js.map